{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useTokenContext } from \"../context/TokenContext\";\nimport { useSearchParams } from \"react-router-dom\";\n\n//este hook carga las notas de la API y devuelve las notas en un objeto\nconst useNotes = () => {\n  _s();\n  const [notes, setNotes] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const {\n    token\n  } = useTokenContext();\n\n  //El effect se ejecuta tras el render\n  useEffect(() => {\n    const fetchNotes = async () => {\n      try {\n        //Al empezar el fetch pasamos loading a true\n        setLoading(true);\n\n        //Hacemos el fetch y recogemos la respuesta del servidor\n        const res = await fetch(`http://localhost:4000/note?${searchParams.toString()}`, {\n          headers: token ? {\n            Authorization: token\n          } : {}\n        });\n\n        //Obtenemos el body de la respuesta\n        const body = await res.json();\n\n        //Si la respuesta no viene bien lanzamos un error\n        if (!res.ok) {\n          throw new Error(body.message);\n        }\n\n        //Cargamos los datos de las notas en el estado notas\n        setNotes(body.data.notes);\n      } catch (error) {\n        //Si salta algun error metemos el mensaje de errorMessage\n        setErrorMessage(error.message);\n      } finally {\n        //Al finalizar el fetch devolvemos loading a false\n        setLoading(false);\n      }\n    };\n    fetchNotes();\n  }, [searchParams]);\n  return {\n    notes,\n    errorMessage,\n    loading,\n    searchParams,\n    setSearchParams\n  };\n};\n_s(useNotes, \"gn/AcHpk9CIvVnH+m/t7TrVWY7c=\", false, function () {\n  return [useSearchParams, useTokenContext];\n});\nexport default useNotes;","map":{"version":3,"names":["useState","useEffect","useTokenContext","useSearchParams","useNotes","notes","setNotes","errorMessage","setErrorMessage","loading","setLoading","searchParams","setSearchParams","token","fetchNotes","res","fetch","toString","headers","Authorization","body","json","ok","Error","message","data","error"],"sources":["/home/hack/a/proyecto3/notas/src/hooks/useNotes.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useTokenContext } from \"../context/TokenContext\";\nimport { useSearchParams } from \"react-router-dom\";\n\n//este hook carga las notas de la API y devuelve las notas en un objeto\nconst useNotes = () => {\n  const [notes, setNotes] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const { token } = useTokenContext();\n\n  //El effect se ejecuta tras el render\n  useEffect(() => {\n    const fetchNotes = async () => {\n      try {\n        //Al empezar el fetch pasamos loading a true\n        setLoading(true);\n\n        //Hacemos el fetch y recogemos la respuesta del servidor\n        const res = await fetch(\n          `http://localhost:4000/note?${searchParams.toString()}`,\n          {\n            headers: token ? { Authorization: token } : {},\n          }\n        );\n\n        //Obtenemos el body de la respuesta\n        const body = await res.json();\n\n        //Si la respuesta no viene bien lanzamos un error\n        if (!res.ok) {\n          throw new Error(body.message);\n        }\n\n        //Cargamos los datos de las notas en el estado notas\n        setNotes(body.data.notes);\n      } catch (error) {\n        //Si salta algun error metemos el mensaje de errorMessage\n        setErrorMessage(error.message);\n      } finally {\n        //Al finalizar el fetch devolvemos loading a false\n        setLoading(false);\n      }\n    };\n\n    fetchNotes();\n  }, [searchParams]);\n\n  return {\n    notes,\n    errorMessage,\n    loading,\n    searchParams,\n    setSearchParams,\n  };\n};\n\nexport default useNotes;\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,eAAe,QAAQ,yBAAyB;AACzD,SAASC,eAAe,QAAQ,kBAAkB;;AAElD;AACA,MAAMC,QAAQ,GAAG,MAAM;EAAA;EACrB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACO,YAAY,EAAEC,eAAe,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGT,eAAe,EAAE;EAEzD,MAAM;IAAEU;EAAM,CAAC,GAAGX,eAAe,EAAE;;EAEnC;EACAD,SAAS,CAAC,MAAM;IACd,MAAMa,UAAU,GAAG,YAAY;MAC7B,IAAI;QACF;QACAJ,UAAU,CAAC,IAAI,CAAC;;QAEhB;QACA,MAAMK,GAAG,GAAG,MAAMC,KAAK,CACpB,8BAA6BL,YAAY,CAACM,QAAQ,EAAG,EAAC,EACvD;UACEC,OAAO,EAAEL,KAAK,GAAG;YAAEM,aAAa,EAAEN;UAAM,CAAC,GAAG,CAAC;QAC/C,CAAC,CACF;;QAED;QACA,MAAMO,IAAI,GAAG,MAAML,GAAG,CAACM,IAAI,EAAE;;QAE7B;QACA,IAAI,CAACN,GAAG,CAACO,EAAE,EAAE;UACX,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACI,OAAO,CAAC;QAC/B;;QAEA;QACAlB,QAAQ,CAACc,IAAI,CAACK,IAAI,CAACpB,KAAK,CAAC;MAC3B,CAAC,CAAC,OAAOqB,KAAK,EAAE;QACd;QACAlB,eAAe,CAACkB,KAAK,CAACF,OAAO,CAAC;MAChC,CAAC,SAAS;QACR;QACAd,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDI,UAAU,EAAE;EACd,CAAC,EAAE,CAACH,YAAY,CAAC,CAAC;EAElB,OAAO;IACLN,KAAK;IACLE,YAAY;IACZE,OAAO;IACPE,YAAY;IACZC;EACF,CAAC;AACH,CAAC;AAAC,GApDIR,QAAQ;EAAA,QAI4BD,eAAe,EAErCD,eAAe;AAAA;AAgDnC,eAAeE,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}